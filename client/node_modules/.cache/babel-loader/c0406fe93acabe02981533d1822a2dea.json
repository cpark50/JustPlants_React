{"ast":null,"code":"var _jsxFileName = \"/Users/cindycindycindycindy/Project4ReactExpress/client/src/components/upload-files.component.js\";\nimport React, { Component } from \"react\";\nimport UploadService from \"../services/file-upload.service\";\nexport default class UploadImages extends Component {\n  constructor(props) {\n    super(props);\n    this.selectFile = this.selectFile.bind(this);\n    this.upload = this.upload.bind(this);\n    this.state = {\n      currentFile: undefined,\n      previewImage: undefined,\n      progress: 0,\n      message: \"\",\n      imageInfos: []\n    };\n  }\n\n  selectFile(event) {\n    this.setState({\n      currentFile: event.target.files[0],\n      previewImage: URL.createObjectURL(event.target.files[0]),\n      progress: 0,\n      message: \"\"\n    });\n  }\n\n  upload() {\n    this.setState({\n      progress: 0\n    });\n    UploadService.upload(this.state.currentFile, event => {\n      this.setState({\n        progress: Math.round(100 * event.loaded / event.total)\n      });\n    }).then(response => {\n      this.setState({\n        message: response.data.message\n      });\n      return UploadService.getFiles();\n    }).then(files => {\n      this.setState({\n        imageInfos: files.data\n      });\n    }).catch(err => {\n      this.setState({\n        progress: 0,\n        message: \"Could not upload the image!\",\n        currentFile: undefined\n      });\n    });\n  }\n\n  componentDidMount() {\n    UploadService.getFiles().then(response => {\n      this.setState({\n        imageInfos: response.data\n      });\n    });\n  }\n\n  render() {\n    const {\n      currentFile,\n      previewImage,\n      progress,\n      message,\n      imageInfos\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"btn btn-default p-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      accept: \"image/*\",\n      onChange: this.selectFile,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-success btn-sm\",\n      disabled: !currentFile,\n      onClick: this.upload,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }\n    }, \"Upload\"))), currentFile && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"progress my-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"progress-bar progress-bar-info progress-bar-striped\",\n      role: \"progressbar\",\n      \"aria-valuenow\": progress,\n      \"aria-valuemin\": \"0\",\n      \"aria-valuemax\": \"100\",\n      style: {\n        width: progress + \"%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }\n    }, progress, \"%\")), previewImage && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"preview\",\n      src: previewImage,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 13\n      }\n    })), message && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alert alert-secondary mt-3\",\n      role: \"alert\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }\n    }, message), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card mt-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }\n    }, \"List of Files\"), /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"list-group list-group-flush\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }\n    }, imageInfos && imageInfos.map((img, index) => /*#__PURE__*/React.createElement(\"li\", {\n      className: \"list-group-item\",\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: img.url,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 19\n      }\n    }, img.name))))));\n  }\n\n}","map":{"version":3,"names":["React","Component","UploadService","UploadImages","constructor","props","selectFile","bind","upload","state","currentFile","undefined","previewImage","progress","message","imageInfos","event","setState","target","files","URL","createObjectURL","Math","round","loaded","total","then","response","data","getFiles","catch","err","componentDidMount","render","width","map","img","index","url","name"],"sources":["/Users/cindycindycindycindy/Project4ReactExpress/client/src/components/upload-files.component.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport UploadService from \"../services/file-upload.service\";\n\nexport default class UploadImages extends Component {\n  constructor(props) {\n    super(props);\n    this.selectFile = this.selectFile.bind(this);\n    this.upload = this.upload.bind(this);\n\n    this.state = {\n        currentFile: undefined,\n        previewImage: undefined,\n        progress: 0,\n        message: \"\",\n        imageInfos: [],\n    };\n  }\n\n  selectFile(event) {\n    this.setState({\n    currentFile: event.target.files[0],\n    previewImage: URL.createObjectURL(event.target.files[0]),\n    progress: 0,\n    message: \"\"\n    });\n  }\n\n  upload() {\n    this.setState({\n      progress: 0,\n    });\n    UploadService.upload(this.state.currentFile, (event) => {\n      this.setState({\n        progress: Math.round((100 * event.loaded) / event.total),\n      });\n    })\n      .then((response) => {\n        this.setState({\n          message: response.data.message,\n        });\n        return UploadService.getFiles();\n      })\n      .then((files) => {\n        this.setState({\n          imageInfos: files.data,\n        });\n      })\n      .catch((err) => {\n        this.setState({\n          progress: 0,\n          message: \"Could not upload the image!\",\n          currentFile: undefined,\n        });\n      });\n  }\n\n  componentDidMount() {\n    UploadService.getFiles().then((response) => {\n      this.setState({\n        imageInfos: response.data,\n      });\n    });\n  }\n  \n  render() {\n    const {\n      currentFile,\n      previewImage,\n      progress,\n      message,\n      imageInfos,\n    } = this.state;\n    return (\n      <div>\n        <div className=\"row\">\n          <div className=\"col-8\">\n            <label className=\"btn btn-default p-0\">\n              <input type=\"file\" accept=\"image/*\" onChange={this.selectFile} />\n            </label>\n          </div>\n          <div className=\"col-4\">\n            <button\n              className=\"btn btn-success btn-sm\"\n              disabled={!currentFile}\n              onClick={this.upload}\n            >\n              Upload\n            </button>\n          </div>\n        </div>\n        {currentFile && (\n          <div className=\"progress my-3\">\n            <div\n              className=\"progress-bar progress-bar-info progress-bar-striped\"\n              role=\"progressbar\"\n              aria-valuenow={progress}\n              aria-valuemin=\"0\"\n              aria-valuemax=\"100\"\n              style={{ width: progress + \"%\" }}\n            >\n              {progress}%\n            </div>\n          </div>\n        )}\n        {previewImage && (\n          <div>\n            <img className=\"preview\" src={previewImage} alt=\"\" />\n          </div>\n        )}\n        {message && (\n          <div className=\"alert alert-secondary mt-3\" role=\"alert\">\n            {message}\n          </div> \n        )}\n        <div className=\"card mt-3\">\n          <div className=\"card-header\">List of Files</div>\n          <ul className=\"list-group list-group-flush\">\n            {imageInfos &&\n              imageInfos.map((img, index) => (\n                <li className=\"list-group-item\" key={index}>\n                  <a href={img.url}>{img.name}</a>\n                </li>\n              ))}\n          </ul>\n        </div>\n      </div>\n    );\n  }\n    \n}"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,aAAP,MAA0B,iCAA1B;AAEA,eAAe,MAAMC,YAAN,SAA2BF,SAA3B,CAAqC;EAClDG,WAAW,CAACC,KAAD,EAAQ;IACjB,MAAMA,KAAN;IACA,KAAKC,UAAL,GAAkB,KAAKA,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAlB;IACA,KAAKC,MAAL,GAAc,KAAKA,MAAL,CAAYD,IAAZ,CAAiB,IAAjB,CAAd;IAEA,KAAKE,KAAL,GAAa;MACTC,WAAW,EAAEC,SADJ;MAETC,YAAY,EAAED,SAFL;MAGTE,QAAQ,EAAE,CAHD;MAITC,OAAO,EAAE,EAJA;MAKTC,UAAU,EAAE;IALH,CAAb;EAOD;;EAEDT,UAAU,CAACU,KAAD,EAAQ;IAChB,KAAKC,QAAL,CAAc;MACdP,WAAW,EAAEM,KAAK,CAACE,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CADC;MAEdP,YAAY,EAAEQ,GAAG,CAACC,eAAJ,CAAoBL,KAAK,CAACE,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAApB,CAFA;MAGdN,QAAQ,EAAE,CAHI;MAIdC,OAAO,EAAE;IAJK,CAAd;EAMD;;EAEDN,MAAM,GAAG;IACP,KAAKS,QAAL,CAAc;MACZJ,QAAQ,EAAE;IADE,CAAd;IAGAX,aAAa,CAACM,MAAd,CAAqB,KAAKC,KAAL,CAAWC,WAAhC,EAA8CM,KAAD,IAAW;MACtD,KAAKC,QAAL,CAAc;QACZJ,QAAQ,EAAES,IAAI,CAACC,KAAL,CAAY,MAAMP,KAAK,CAACQ,MAAb,GAAuBR,KAAK,CAACS,KAAxC;MADE,CAAd;IAGD,CAJD,EAKGC,IALH,CAKSC,QAAD,IAAc;MAClB,KAAKV,QAAL,CAAc;QACZH,OAAO,EAAEa,QAAQ,CAACC,IAAT,CAAcd;MADX,CAAd;MAGA,OAAOZ,aAAa,CAAC2B,QAAd,EAAP;IACD,CAVH,EAWGH,IAXH,CAWSP,KAAD,IAAW;MACf,KAAKF,QAAL,CAAc;QACZF,UAAU,EAAEI,KAAK,CAACS;MADN,CAAd;IAGD,CAfH,EAgBGE,KAhBH,CAgBUC,GAAD,IAAS;MACd,KAAKd,QAAL,CAAc;QACZJ,QAAQ,EAAE,CADE;QAEZC,OAAO,EAAE,6BAFG;QAGZJ,WAAW,EAAEC;MAHD,CAAd;IAKD,CAtBH;EAuBD;;EAEDqB,iBAAiB,GAAG;IAClB9B,aAAa,CAAC2B,QAAd,GAAyBH,IAAzB,CAA+BC,QAAD,IAAc;MAC1C,KAAKV,QAAL,CAAc;QACZF,UAAU,EAAEY,QAAQ,CAACC;MADT,CAAd;IAGD,CAJD;EAKD;;EAEDK,MAAM,GAAG;IACP,MAAM;MACJvB,WADI;MAEJE,YAFI;MAGJC,QAHI;MAIJC,OAJI;MAKJC;IALI,IAMF,KAAKN,KANT;IAOA,oBACE;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBACE;MAAK,SAAS,EAAC,KAAf;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBACE;MAAK,SAAS,EAAC,OAAf;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBACE;MAAO,SAAS,EAAC,qBAAjB;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBACE;MAAO,IAAI,EAAC,MAAZ;MAAmB,MAAM,EAAC,SAA1B;MAAoC,QAAQ,EAAE,KAAKH,UAAnD;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EADF,CADF,CADF,eAME;MAAK,SAAS,EAAC,OAAf;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBACE;MACE,SAAS,EAAC,wBADZ;MAEE,QAAQ,EAAE,CAACI,WAFb;MAGE,OAAO,EAAE,KAAKF,MAHhB;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,YADF,CANF,CADF,EAiBGE,WAAW,iBACV;MAAK,SAAS,EAAC,eAAf;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBACE;MACE,SAAS,EAAC,qDADZ;MAEE,IAAI,EAAC,aAFP;MAGE,iBAAeG,QAHjB;MAIE,iBAAc,GAJhB;MAKE,iBAAc,KALhB;MAME,KAAK,EAAE;QAAEqB,KAAK,EAAErB,QAAQ,GAAG;MAApB,CANT;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GAQGA,QARH,MADF,CAlBJ,EA+BGD,YAAY,iBACX;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBACE;MAAK,SAAS,EAAC,SAAf;MAAyB,GAAG,EAAEA,YAA9B;MAA4C,GAAG,EAAC,EAAhD;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EADF,CAhCJ,EAoCGE,OAAO,iBACN;MAAK,SAAS,EAAC,4BAAf;MAA4C,IAAI,EAAC,OAAjD;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GACGA,OADH,CArCJ,eAyCE;MAAK,SAAS,EAAC,WAAf;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBACE;MAAK,SAAS,EAAC,aAAf;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,mBADF,eAEE;MAAI,SAAS,EAAC,6BAAd;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GACGC,UAAU,IACTA,UAAU,CAACoB,GAAX,CAAe,CAACC,GAAD,EAAMC,KAAN,kBACb;MAAI,SAAS,EAAC,iBAAd;MAAgC,GAAG,EAAEA,KAArC;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBACE;MAAG,IAAI,EAAED,GAAG,CAACE,GAAb;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GAAmBF,GAAG,CAACG,IAAvB,CADF,CADF,CAFJ,CAFF,CAzCF,CADF;EAuDD;;AA5HiD"},"metadata":{},"sourceType":"module"}